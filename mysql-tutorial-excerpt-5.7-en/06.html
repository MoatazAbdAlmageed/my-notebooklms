<!DOCTYPE html>
<html data-bs-theme="dark" lang="en" dir="ltr">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link rel="stylesheet" href="../style.css">
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-12">


                <p>يا فندم، تحت أمرك. الفصل رقم 6 ده فصل صغير ومهم جداً، وهو بيتكلم عن طريقة مختلفة لاستخدام برنامج
                    <code>mysql</code> غير الطريقة التفاعلية اللي كنا شغالين بيها في الفصول اللي فاتت.
                </p>
                <p>الفصل ده اسمه: <strong>&quot;استخدام <code>mysql</code> في وضع الدفعة (Batch Mode)&quot;</strong>.
                </p>
                <hr>
                <h3 id="-6-mysql-batch-mode-">الفصل 6: استخدام <code>mysql</code> في وضع الدفعة (Batch Mode)</h3>
                <p>الخلاصة: بدل ما تقعد تكتب أمر أمر وتشوف النتيجة مباشرة (الوضع التفاعلي <code>mysql&gt;</code>), وضع
                    الدفعة (Batch Mode) بيخليك تحط كل الأوامر بتاعتك في ملف واحد (Script File)، وتدي الأمر ده كله لـ
                    <code>mysql</code> عشان ينفذه مرة واحدة.
                </p>
                <h4 id="1-how-to-run-batch-mode-">1. إزاي بنشغل وضع الدفعة؟ (How to Run Batch Mode)</h4>
                <p>الطريقة الأساسية عشان تخلي <code>mysql</code> يقرأ الأوامر من ملف هي إنك تستخدم علامة
                    <strong><code>&lt;</code></strong> (Input redirection) في سطر الأوامر (Command Line):
                </p>
                <p><strong>الصيغة:</strong></p>
                <pre><code class="lang-bash"><span class="hljs-symbol">$</span>&gt; mysql &lt; batch-<span class="hljs-keyword">file</span>
</code></pre>
                <ul>
                    <li><code>batch-file</code> ده هو الملف النصي اللي فيه أوامر SQL (زي <code>SELECT * FROM pet;</code>
                        و <code>UPDATE pet SET owner=&#39;...&#39;;</code>).</li>
                </ul>
                <p><strong>لو محتاج تتصل بالسيرفر بـ (Host, User, Password):</strong></p>
                <pre><code class="lang-bash">$&gt; mysql -h host -u <span class="hljs-keyword">user</span> <span class="hljs-title">-p</span> <span class="hljs-tag">&lt; batch-file
Enter password: ********</span>
</code></pre>
                <p><strong>ملحوظة خاصة بالويندوز:</strong>
                    لو بتستخدم ويندوز وعندك مشاكل في بعض الحروف الخاصة في الملف (Special Characters)، ممكن تستخدم أمر
                    الـ <code>source</code> بالشكل ده:</p>
                <pre><code class="lang-bash"><span class="hljs-symbol">C:</span>\&gt; mysql -e <span class="hljs-string">"source batch-file"</span>
</code></pre>
                <h4 id="2-script-batch-mode-">2. ليه نستخدم ملف الـ Script (أسباب استخدام Batch Mode)؟</h4>
                <p>وضع الدفعة ليه مميزات كتير بتخلي الشغل أسهل، خصوصاً لو كانت الأوامر بتتكرر أو طويلة:</p>
                <ol>
                    <li><strong>توفير الوقت والجهد للتكرار:</strong> لو بتشغل نفس الـ Query كل يوم أو كل أسبوع، إنك تحطه
                        في ملف بيخليك تتجنب إنك تكتبه كل مرة.</li>
                    <li><strong>تطوير الاستعلامات (Query Development):</strong> لو بتكتب استعلامات طويلة أو استعلامات
                        مكونة من كذا أمر، لو عملت غلطة، مش مضطر تعيد كتابة كل حاجة. بتعدل الملف (Script) وتخليه يتنفذ
                        تاني.</li>
                    <li><strong>تعديل استعلامات موجودة:</strong> ممكن تنسخ ملف Script قديم وتعدله عشان تعمل Query جديدة
                        مشابهة.</li>
                    <li><strong>التعامل مع الأخطاء (<code>--force</code>):</strong> لو عايز الـ Script يكمل تنفيذ باقي
                        الأوامر اللي فيه حتى لو أمر معين فشل أو طلع خطأ، ممكن تستخدم خيار <code>--force</code> في سطر
                        الأوامر.</li>
                    <li><strong>إدارة الإخراج الكبير (Output Management):</strong>
                        <ul>
                            <li>لو الـ Query بيطلع نتائج كتير ممكن تقعد تتفرج عليها وهي بتجري بسرعة من الشاشة (Scrolling
                                off). ممكن تستخدم <strong><code>| more</code></strong> عشان تقسم النتيجة صفحة صفحة
                                (Pager):
                                <pre><code class="lang-bash"><span class="hljs-symbol">$</span>&gt; mysql &lt; batch-<span class="hljs-keyword">file</span> | more
</code></pre>
                            </li>
                            <li>ممكن تخلي كل ناتج الأوامر يتسجل في ملف عشان تراجعه أو تعالجه بعدين، باستخدام
                                <strong><code>&gt;</code></strong> (Output redirection):
                                <pre><code class="lang-bash">$&gt; mysql &lt; batch-<span class="hljs-keyword">file</span> &gt; mysql.<span class="hljs-keyword">out</span>
</code></pre>
                            </li>
                        </ul>
                    </li>
                    <li><strong>التوزيع والمشاركة:</strong> ممكن توزع الـ Script ده على ناس تانية عشان يشغلوا نفس
                        الأوامر بالظبط.</li>
                    <li><strong>الاستخدام غير التفاعلي (Cron Jobs):</strong> في بعض الحالات، زي إنك تشغل Query معين في
                        وقت محدد تلقائي (زي Cron Job)، لازم تستخدم وضع الدفعة لأنه مش بيسمح بالاستخدام التفاعلي.</li>
                </ol>
                <h4 id="3-output-format-difference-">3. تنسيق الإخراج يختلف (Output Format Difference)</h4>
                <p>مهم جداً نعرف إن طريقة عرض النتائج في وضع الدفعة بتختلف عن الوضع التفاعلي.</p>
                <ul>
                    <li><strong>في الوضع التفاعلي (Interactive Mode):</strong> النتيجة بتظهر في شكل جدول مُنَسَّق
                        (Tabular Form) بحدود.</li>
                    <li><strong>في وضع الدفعة (Batch Mode):</strong> النتيجة بتكون <strong>أكثر اختصاراً (more
                            concise)</strong> وبدون الجدول والحدود.</li>
                </ul>
                <p><strong>مثال على الاختلاف:</strong></p>
                <table>
                    <thead>
                        <tr>
                            <th style="text-align:left">الأمر</th>
                            <th style="text-align:left">النتيجة في الوضع التفاعلي</th>
                            <th style="text-align:left">النتيجة في وضع الدفعة</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="text-align:left"><code>SELECT DISTINCT species FROM pet;</code></td>
                            <td style="text-align:left">بتطلع في جدول منظم بحدود</td>
                            <td style="text-align:left"><code>species</code> <br> <code>bird</code> <br>
                                <code>cat</code> <br> <code>dog</code> <br> <code>hamster</code> <br> <code>snake</code>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p><strong>إزاي نجيب تنسيق الوضع التفاعلي في وضع الدفعة؟</strong></p>
                <ul>
                    <li>لو عايز إن ناتج الـ Batch Mode يكون بنفس تنسيق الجدول المُنَسَّق بتاع الوضع التفاعلي، بتستخدم
                        الخيار <strong><code>-t</code></strong>: <code>mysql -t</code>.</li>
                    <li>لو عايز إن الأوامر اللي بتتنفذ تظهر (تتعملها Echo) في الإخراج، بتستخدم الخيار
                        <strong><code>-v</code></strong>: <code>mysql -v</code>.
                    </li>
                </ul>
                <h4 id="4-script-mysql-">4. تشغيل الـ Script من داخل <code>mysql&gt;</code></h4>
                <p>حتى لو كنت شغال بالفعل في الوضع التفاعلي (عند الـ Prompt بتاع <code>mysql&gt;</code>)، ممكن تنفذ ملف
                    Script باستخدام أمر <strong><code>source</code></strong> أو اختصاره
                    <strong><code>\.</code></strong>:
                </p>
                <p><strong>الأمثلة:</strong></p>
                <pre><code class="lang-sql">mysql&gt; <span class="hljs-keyword">source</span> <span class="hljs-keyword">filename</span>;
mysql&gt; \. <span class="hljs-keyword">filename</span>
</code></pre>
                <p>وضع الدفعة ده هو الأداة اللي بيستخدمها كل حد بيشتغل على MySQL عشان يعمل أتمتة (Automation) لأوامر
                    بتتكرر أو عشان يتعامل مع كمية بيانات كبيرة من ملفات خارجية. هو عامل زي إنك تسجل كل التعليمات في ورقة
                    وتديها للعامل ينفذها كلها مرة واحدة من غير ما يحتاج يسألك كل شوية.</p>






            </div>
        </div>

    </div>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" //
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+Y2XIdI6kB1jRVVbR4D9M1zYjFq2D" //
        crossorigin="anonymous"></script>

    <script src="../script.js"> </script>


</body>

</html>