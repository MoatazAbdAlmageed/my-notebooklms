<!DOCTYPE html>
<html data-bs-theme="dark" lang="ar" dir="rtl">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>?</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link rel="stylesheet" href="../style.css">
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-12">




     <div id="md-render"></div>

                <div id="md-source" style="display:none;">

                    يا باشا، الفصل التاني ده هو اللي بيوريك **إزاي تبدأ تكتب سكريبتاتك صح، وإزاي لو حاجة باظت تعرف تصلّحها** (Debugging).

الكتاب بيقسّم الفصل ده لثلاث محاور رئيسية:

### المحور الأول: إنشاء وتشغيل السكريبت (Creating and Running a Script)

عشان تعمل أي سكريبت، محتاج تمشي على الخطوات دي:

#### 1. الكتابة والتسمية (Writing and Naming)

1.  **المُحرِّر (Editor):** أي محرر نصوص هينفع (زي vim, emacs, gedit)، بس يُنصح تستخدم مُحرر متقدم بيدعم ميزة **"تظليل الصياغة" (Syntax Highlighting)**. الميزة دي بتلوّن الأوامر والمتغيرات، وده بيساعدك جدًا إنك متنساش أقواس أو فواصل منقوطة، وهي الأخطاء اللي المبتدئين بيقعوا فيها كتير.
2.  **الأوامر:** بتحط الأوامر اللي كنت هتكتبها على سطر الأوامر العادي (Command Line) داخل الملف. الأوامر دي ممكن تكون دوال (Functions)، أوامر مُضَمَّنة في الشل (Built-ins)، أو برامج خارجية (UNIX commands).
3.  **الاسم (Naming):** اختار اسم معقول للسكريبت بيوصف هو بيعمل إيه، والأحسن إنك تخليه ينتهي بـ `.sh`. مهم جداً تتأكد إن الاسم ده مش هيعمل تعارض مع أي أمر موجود عندك في النظام، وتعمل التشيك ده باستخدام أوامر زي `which` أو `whereis`.

> **نصيحة عملية:** الكتاب بينصحك تعمل مجلد اسمه `~/scripts` وتحط فيه سكريبتاتك، وتضيف المجلد ده للمتغير `PATH` عشان تعرف تشغل السكريبت من أي مكان.

#### 2. تنفيذ السكريبت (Executing the Script)

قبل ما تشغّل السكريبت، لازم تدّيله **صلاحية التنفيذ (Execute Permissions)**. لو أنت مالك الملف، بتستخدم الأمر ده:

```bash
willy:~/scripts> chmod u+x script1.sh
```

بعد ما ياخد الصلاحية (هتلاقي علامة `x` ظهرت في الـ `ls -l`)، ممكن تشغله بكذا طريقة:

*   **الطريقة العادية (Subshell):**
    بتشغله زي أي أمر عادي: `willy:~> script1.sh`.
    **مهم:** في الحالة دي، الشل بيعمل عملية جديدة (Subshell). أي متغيرات أو دوال بتم إنشائها داخل السكريبت ده بتفضل معروفة بس للـ Subshell، وأول ما السكريبت يخلص، التغييرات دي بتتمسح.

*   **التنفيذ باستخدام `source` أو `.` (Current Shell):**
    لو عايز تشغل السكريبت ده في نفس جلسة الشل اللي أنت فيها، بحيث لو عملت أي متغير جوه السكريبت يفضل موجود معاك بعد ما يخلص، بتستخدم الأمر `source` أو اختصاره اللي هو النقطة (`.`):

    ```bash
    willy:~/scripts> source script1.sh
    # أو
    willy:~/scripts> . script1.sh
    ```

    **الميزة:** في الحالة دي، مش بتحتاج تدي السكريبت صلاحية تنفيذ (Execute Permission). أي تغيير هيعمله السكريبت في البيئة بتاعتك (زي متغير `VALUE`) هيفضل موجود بعد ما يخلص.

### المحور الثاني: أساسيات السكريبت (Script Basics)

أي سكريبت باش (Bash Script) كويس لازم يكون فيه حاجتين أساسيتين:

#### 1. تحديد مفسّر الشل (Which Shell will Run the Script)

**أول سطر في السكريبت لازم يكون اسمه "Shebang" (الشيبانج)**. وده بيحدد مين المترجم أو الـ Shell اللي هيشغل الأوامر دي.

*   بالنسبة للكتاب ده ولكورس Bash عمومًا، لازم أول سطر يكون كده:

    ```bash
    #!/bin/bash
    ```

*   **تحذير:** متسيبش أي سطر فاضي قبل الـ Shebang، لأن النظام بيبص على أول حرفين في أول سطر.

#### 2. إضافة التعليقات (Adding Comments)

التعليقات هي أي حاجة بتيجي بعد علامة الهاشتاغ **`#`** في السطر. الشل بيتجاهل السطر ده تمامًا، بس هو مهم جدًا ليك ولأي حد هيقرا الكود بعدك:

1.  **للتوضيح:** التعليقات بتوضّح إيه اللي بيحصل في الكود، وبتسهل على أي مستخدم أو مدير نظام تاني يفهم المنطق بتاعك.
2.  **للمراجعة الذاتية:** لو قريت معلومات معقدة من صفحات الـ man pages عشان تعمل وظيفة معينة في السكريبت، حط تعليق يفسّر إيه اللي عملته عشان متضطرش ترجع تدور تاني بعد كام أسبوع أو شهر.

> **القاعدة الذهبية:** الأفضل إنك تكتر من الشرح والتوضيح في التعليقات بدل ما تقلل.

---

### المحور الثالث: تصحيح أخطاء سكريبتات باش (Debugging Bash Scripts)

لو السكريبت بتاعك مبيشتغلش صح، باش بيديك أدوات ممتازة عشان تشوف خطوة خطوة إيه اللي بيحصل.

#### 1. تصحيح الأخطاء على السكريبت كله (Debugging the Entire Script)

أكتر طريقة شائعة هي إنك تشغّل الـ Subshell ومعاه الخيار **`-x`**.

*   **الأمر:** `bash -x script_name.sh`
*   **النتيجة:** الشل بيطبع **أثر (Trace)** لكل أمر والحجج (Arguments) بتاعته على الشاشة **بعد** ما يكون عمل توسيع (Expanded) للأوامر، و**قبل** ما ينفذها.

**مثال مُبَسَّط للي بيحصل:**
بدل ما السكريبت ينفذ: `+ echo 'Hi, willy!'`
بيظهر لك في وضع الـ Debugging:
```
+ echo 'Hi, willy!'
Hi, willy!
```
(لاحظ علامة `+` اللي بتدل على عملية الـ Tracing).

#### 2. تصحيح الأخطاء على أجزاء من السكريبت (Debugging Parts of the Script)

لو أنت متأكد إن جزء كبير من السكريبت شغال تمام، ممكن تعمل Debugging بس على الأجزاء اللي شاكك فيها، باستخدام الأمر المُضَمَّن **`set`**:

*   **`set -x`**: شغّل وضع الـ Debugging من هنا.
*   **`set +x`**: وقّف وضع الـ Debugging من هنا.

**مثال على استخدام `set`:**
لو شاكك إن أمر `w` فيه مشكلة:

```bash
# ... أوامر شغالة كويس
set -x                  # تفعيل وضع التصحيح
w                       # الأمر المشكوك فيه
set +x                  # إيقاف وضع التصحيح
# ... أوامر شغالة كويس
```

#### 3. خيارات مفيدة أخرى في `set`

ممكن تستخدم أوامر `set` تانية في الـ Debugging أو لتغيير سلوك الشل:

*   **`set -v`**: يطبع أسطر الإدخال (السكريبت) زي ما بيتم قراءتها (Verbose).
*   **`set -f`** أو **`set -o noglob`**: بيوقف الـ Metacharacters (زي `*` أو `?`) إنها تعمل توسيع لأسماء الملفات (Globbing).

#### 4. الإيكو كأداة تصحيح (Echo as a Debugging Tool)

لو عايز تعرف قيمة متغير معين وصلت لإيه في نقطة محددة من السكريبت، ممكن تحط جملة `echo` توضيحية:

```bash
# ...
echo "رسالة تصحيح: قيمة المتغير VARNAME حالياً هي $VARNAME."
# ...
```
التقنية دي مهمة جدًا في السكريبتات المعقدة.

---

**ملخص الفصل الثاني في تشبيه بسيط:**

لو اعتبرنا إن كتابة السكريبتات زي بناء بيت، فالفصل الأول بيوريك الطوب والأسمنت (الأوامر الأساسية). الفصل الثاني ده بقى بيوريك إنك **لازم تعمل رخصة البناء (صلاحية التنفيذ)**، و**لازم تحدد مين المهندس المشرف اللي هيشرف على التنفيذ (الـ Shebang)**. أما الـ Debugging، فهو عامل زي إنك تستأجر فني يركب معاك كاميرا حرارية (الأمر `set -x`) عشان يشوف بالظبط إيه اللي بيحصل جوه الحيطة سطر بسطر لما بتشغل الكهربا، ويحدد مكان أي "ماس كهربائي" (خطأ في الكود) بدل ما البيت كله يتحرق!
                </div>





            </div>
        </div>

    </div>

 <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/showdown@2.1.0/dist/showdown.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" //
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+Y2XIdI6kB1jRVVbR4D9M1zYjFq2D" //
        crossorigin="anonymous"></script>

    <script src="../script.js"> </script>


</body>

</html>